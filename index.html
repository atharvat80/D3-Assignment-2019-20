<!DOCTYPE html>
<html lang="en-gb">
    <head>
        <meta charset="UTF-8">
        <title>2017 French Presidential Election Results</title>
        <link href="stylesheet.css" rel="stylesheet" type="text/css">
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="https://d3js.org/d3-queue.v3.min.js"></script>
        <script src="https://d3js.org/topojson.v2.min.js"></script>
        <script src="script.js"></script>

    </head>
    <body>
        <div class="topnav">
            <a class="passive"> 2017 French Presidential Election Results by Departements</a>
            <a href="./out/index.html">Documentation</a>
            <a href="https://bl.ocks.org/miguelrofer/ac1ec983fc8c1d0b8677259e6bb96198">Source</a>
            <a href="https://github.com/atharvat80/D3_Assignment">Github Repository</a>
        </div> 

        <div class="sidenav">
            <p style="text-align: center; font-weight: bold;">How to use this visualisation</p><hr>
            <ul>
                <li>Choose which round of the election to visualise using the buttons below</li>
                <li>Clicking on a department  shows the results</li>
            </ul>
            <button id="round1" class="buttons">Round 1</button>
            <button id="round2">Round 2</button>
            
            <hr><p style="text-align: center; font-weight: bold;">About</p><hr>
            <ul>
                <li>Author: <a href="https://github.com/atharvat80">Atharva Tidke</a></li>
                <li>Election data source: <a href="https://en.wikipedia.org/wiki/2017_French_presidential_election#By_department">Wikipedia</a></li>
                <li>France shapefile source: <a href="https://geo.nyu.edu/catalog/stanford-fs569ct0668">NYU Spatial Data Repository</a></li>
            </ul>
            <hr><p style="text-align: center; font-weight: bold">Results</p><hr>
            <h3 id="constituency" class="info"></h3>
            <p id="result" class="info"></p>
        </div>
        
        <div id="map" class="content"></div>

        <script>
            function round1(){
                france = new map();
                france.removePrevious('svg');
                france.init(
                    "france_2017/departements.json",
                    "france_2017/round1.csv", 
                    "france_2017/colours.json",
                    "map", "FRA_adm2-1", "NAME_2", "departement", "candidate", "party"
                    );
            }

            function round2(){
                france = new map();
                france.removePrevious('svg');
                france.init(
                    "france_2017/departements.json",
                    "france_2017/round2.csv",
                    "france_2017/colours.json", 
                    "map", "FRA_adm2-1", "NAME_2", "departement", "candidate", "party"
                    );
            }

            function selectMap(){
                document.addEventListener("DOMContentLoaded", function(){
                    var button1 = document.getElementById("round1");
                    var button2 = document.getElementById("round2");
                    button1.addEventListener("click", round1);
                    button2.addEventListener("click", round2);
                    });
            }

            selectMap()
        </script>

    </body>
    
</html>
